<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>为 Hexo 博客添加 Giscus 评论系统</title>
    <url>/2026/02/08/add-giscus-comments/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>为博客添加评论功能是增强互动性的重要一步。这篇文章记录我为 Hexo + Butterfly 博客集成 Giscus 评论系统的完整过程。</p>
<h2 id="为什么选择-Giscus？"><a href="#为什么选择-Giscus？" class="headerlink" title="为什么选择 Giscus？"></a>为什么选择 Giscus？</h2><p>在众多评论系统中（Disqus、Gitalk、Valine 等），我选择 Giscus 的原因：</p>
<ul>
<li><strong>无需数据库</strong>：不需要额外的后端服务</li>
<li><strong>支持 Markdown</strong>：评论可以使用完整的 Markdown 语法</li>
<li><strong>主题适配</strong>：自动适配网站的明暗主题</li>
<li><strong>完全免费</strong>：无任何使用限制</li>
<li><strong>隐私友好</strong>：不会追踪用户数据</li>
</ul>
<h2 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h2><h3 id="1-创建评论存储仓库"><a href="#1-创建评论存储仓库" class="headerlink" title="1. 创建评论存储仓库"></a>1. 创建评论存储仓库</h3><p>在 GitHub 上创建一个公开仓库用于存储评论数据。</p>
<p><strong>关键设置：</strong></p>
<ul>
<li>仓库必须是 <strong>public</strong>（公开）</li>
<li>启用 <strong>Discussions</strong> 功能：进入仓库 Settings → Features → 勾选 Discussions</li>
</ul>
<h3 id="2-安装-Giscus-App"><a href="#2-安装-Giscus-App" class="headerlink" title="2. 安装 Giscus App"></a>2. 安装 Giscus App</h3><p>访问 <a href="https://github.com/apps/giscus">Giscus App</a> 并安装到你的评论仓库：</p>
<ol>
<li>点击 “Install”</li>
<li>选择 “Only select repositories”</li>
<li>选中刚才创建的仓库</li>
<li>授权安装</li>
</ol>
<h2 id="配置-Giscus"><a href="#配置-Giscus" class="headerlink" title="配置 Giscus"></a>配置 Giscus</h2><h3 id="3-获取配置参数"><a href="#3-获取配置参数" class="headerlink" title="3. 获取配置参数"></a>3. 获取配置参数</h3><p>访问 <a href="https://giscus.app/zh-CN">Giscus 官网</a> 进行配置：</p>
<p><strong>① 仓库信息</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">仓库：用户名/仓库名</span><br></pre></td></tr></table></figure>

<p><strong>② Discussion 分类</strong></p>
<p>选择 “Announcements” 类型（推荐），这样只有仓库维护者可以创建新讨论，但所有人都能评论。</p>
<p><strong>③ 映射方式</strong></p>
<p>选择 “pathname”（路径名），这样每篇文章会根据 URL 路径自动创建对应的 Discussion。</p>
<p><strong>④ 主题</strong></p>
<p>选择 “preferred_color_scheme”（跟随系统），自动适配明暗模式。</p>
<p><strong>⑤ 获取关键 ID</strong></p>
<p>配置完成后，Giscus 会生成一段代码，从中提取两个关键参数：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://giscus.app/client.js&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">data-repo</span>=<span class="string">&quot;用户名/仓库名&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">data-repo-id</span>=<span class="string">&quot;XXXXXXXXXXX&quot;</span>          &lt;!<span class="attr">--</span> <span class="attr">这是</span> <span class="attr">repo_id</span> <span class="attr">--</span>&gt;</span><span class="language-handlebars"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">        data-category=&quot;Announcements&quot;</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">        data-category-id=&quot;XXXXXXXXXXXX&quot; <span class="comment">&lt;!-- 这是 category_id --&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">        ...&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"></span></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>记下 <code>data-repo-id</code> 和 <code>data-category-id</code> 的值。</p>
<h2 id="在-Butterfly-主题中配置"><a href="#在-Butterfly-主题中配置" class="headerlink" title="在 Butterfly 主题中配置"></a>在 Butterfly 主题中配置</h2><h3 id="4-修改主题配置文件"><a href="#4-修改主题配置文件" class="headerlink" title="4. 修改主题配置文件"></a>4. 修改主题配置文件</h3><p>打开 <code>themes/butterfly/_config.yml</code>，找到 <code>comments</code> 部分：</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">comments:</span></span><br><span class="line">  <span class="comment"># 选择评论系统</span></span><br><span class="line">  <span class="attr">use:</span> <span class="string">giscus</span></span><br><span class="line">  <span class="attr">text:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># lazyload: 懒加载评论</span></span><br><span class="line">  <span class="attr">lazyload:</span> <span class="literal">false</span></span><br><span class="line">  <span class="comment"># count: 显示评论数</span></span><br><span class="line">  <span class="attr">count:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># card_post_count: 在卡片上显示评论数</span></span><br><span class="line">  <span class="attr">card_post_count:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>

<p>然后找到 <code>giscus</code> 配置段，填入参数：</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">giscus:</span></span><br><span class="line">  <span class="attr">repo:</span> <span class="string">用户名/仓库名</span></span><br><span class="line">  <span class="attr">repo_id:</span> <span class="string">XXXXXXXXXXXXXXXXXX</span></span><br><span class="line">  <span class="attr">category_id:</span> <span class="string">XXXXXXXXXXXXXXXXXX</span></span><br><span class="line">  <span class="attr">theme:</span></span><br><span class="line">    <span class="attr">light:</span> <span class="string">light</span></span><br><span class="line">    <span class="attr">dark:</span> <span class="string">dark</span></span><br><span class="line">  <span class="attr">option:</span></span><br><span class="line">    <span class="attr">data-mapping:</span> <span class="string">pathname</span></span><br><span class="line">    <span class="attr">data-strict:</span> <span class="number">0</span></span><br><span class="line">    <span class="attr">data-reactions-enabled:</span> <span class="number">1</span></span><br><span class="line">    <span class="attr">data-emit-metadata:</span> <span class="number">0</span></span><br><span class="line">    <span class="attr">data-input-position:</span> <span class="string">bottom</span></span><br><span class="line">    <span class="attr">data-lang:</span> <span class="string">zh-CN</span></span><br><span class="line">    <span class="attr">data-loading:</span> <span class="string">lazy</span></span><br></pre></td></tr></table></figure>

<p><strong>参数说明：</strong></p>
<ul>
<li><code>repo</code>: 你的评论仓库（格式：用户名&#x2F;仓库名）</li>
<li><code>repo_id</code>: 从 Giscus 获取的仓库 ID</li>
<li><code>category_id</code>: 从 Giscus 获取的分类 ID</li>
<li><code>data-mapping: pathname</code>: 使用文章路径作为映射</li>
<li><code>data-lang: zh-CN</code>: 界面语言设为中文</li>
<li><code>data-reactions-enabled: 1</code>: 启用表情回应功能</li>
</ul>
<h3 id="5-重新生成并部署"><a href="#5-重新生成并部署" class="headerlink" title="5. 重新生成并部署"></a>5. 重新生成并部署</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo clean</span><br><span class="line">hexo generate</span><br><span class="line">hexo deploy</span><br></pre></td></tr></table></figure>

<h2 id="效果验证"><a href="#效果验证" class="headerlink" title="效果验证"></a>效果验证</h2><p>部署完成后，访问任意文章页面，应该能看到：</p>
<ul>
<li>文章底部出现 Giscus 评论框</li>
<li>需要登录 GitHub 才能评论</li>
<li>评论会自动同步到仓库的 Discussions 中</li>
<li>支持 Markdown 格式、代码高亮、表情回应</li>
</ul>
<h2 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h2><ol>
<li><strong>仓库必须公开</strong>：私有仓库无法使用 Giscus</li>
<li><strong>确保安装了 Giscus App</strong>：否则评论无法加载</li>
<li><strong>Discussions 必须启用</strong>：在仓库设置中开启</li>
<li><strong>首次评论会自动创建 Discussion</strong>：按文章路径命名</li>
<li><strong>可以在 GitHub 仓库中管理评论</strong>：删除、编辑、置顶等</li>
</ol>
]]></content>
      <categories>
        <category>博客搭建</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
        <tag>Giscus</tag>
        <tag>评论系统</tag>
      </tags>
  </entry>
  <entry>
    <title>使用 Hexo + Butterfly 搭建我的个人博客</title>
    <url>/2026/02/05/hexo-butterfly-blog-setup/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>很早之前就想搭一个属于自己的博客，但一直停留在“想做”的阶段。  </p>
<p>这篇文章主要记录我使用 <strong>Hexo + Butterfly</strong> 搭建博客的过程，一方面作为备忘，另一方面也算是这个博客的起点。</p>
<hr>
<h2 id="关于技术选型"><a href="#关于技术选型" class="headerlink" title="关于技术选型"></a>关于技术选型</h2><p>一开始我也考虑过很多方案，比如 WordPress，或者干脆用前端框架自己写一套。<br>但综合考虑之后，还是选择了 Hexo。</p>
<p>原因其实很简单：<br>Hexo 是静态博客，结构清晰，写文章就是写 Markdown，不需要关心数据库和后端服务。对目前的我来说，这种“专注写作本身”的方式更合适。</p>
<p>在主题方面，我选择了 Butterfly。这个主题整体风格简洁，配置项比较全，文档也比较完善，适合长期维护。</p>
<hr>
<h2 id="Hexo-的安装与初始化"><a href="#Hexo-的安装与初始化" class="headerlink" title="Hexo 的安装与初始化"></a>Hexo 的安装与初始化</h2><p>本地环境准备好 Node.js 和 Git 之后，就可以直接安装 Hexo CLI。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install -g hexo-cli</span><br></pre></td></tr></table></figure>

<p>接着初始化博客目录：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo init blog</span><br><span class="line"><span class="built_in">cd</span> blog</span><br><span class="line">npm install</span><br></pre></td></tr></table></figure>

<p>随后在 themes 目录下克隆主题仓库：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/jerryc127/hexo-theme-butterfly.git</span><br></pre></td></tr></table></figure>

<p>然后在站点配置文件 _config.yml 中，把主题改成：</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">theme:</span> <span class="string">butterfly</span></span><br></pre></td></tr></table></figure>

<p>接下来便是完善一些基础配置和页面。</p>
<hr>
<h2 id="添加-Live2D-小人"><a href="#添加-Live2D-小人" class="headerlink" title="添加 Live2D 小人"></a>添加 Live2D 小人</h2><p>为了让博客更有趣一些，我在右下角添加了一个 Live2D 小人。Butterfly 主题支持通过代码注入的方式快速集成。</p>
<h3 id="配置方法"><a href="#配置方法" class="headerlink" title="配置方法"></a>配置方法</h3><p>打开 <code>themes/butterfly/_config.yml</code>，找到 <code>inject</code> 配置段，在 <code>bottom</code> 部分添加以下代码：</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">inject:</span></span><br><span class="line">  <span class="attr">head:</span></span><br><span class="line">    <span class="comment"># ... 其他配置</span></span><br><span class="line">  <span class="attr">bottom:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&#x27;&lt;script src=&quot;https://cdn.jsdelivr.net/npm/live2d-widget@3.1.4/lib/L2Dwidget.min.js&quot;&gt;&lt;/script&gt;&#x27;</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&#x27;&lt;script&gt;L2Dwidget.init(&#123; model: &#123; jsonPath: &quot;https://cdn.jsdelivr.net/npm/live2d-widget-model-shizuku@1.0.5/assets/shizuku.model.json&quot; &#125;, display: &#123; position: &quot;right&quot;, width: 150, height: 300, hOffset: 30, vOffset: -10 &#125;, mobile: &#123; show: true, scale: 0.6 &#125;, react: &#123; opacityDefault: 0.8, opacityOnHover: 0.2 &#125; &#125;);&lt;/script&gt;&#x27;</span></span><br></pre></td></tr></table></figure>

<h3 id="参数说明"><a href="#参数说明" class="headerlink" title="参数说明"></a>参数说明</h3><ul>
<li><strong>model.jsonPath</strong>：角色模型的 CDN 地址，这里使用的是 Shizuku（时雨）模型</li>
<li><strong>display.position</strong>：显示位置（left&#x2F;right），这里设为右下角</li>
<li><strong>display.width&#x2F;height</strong>：模型宽高（像素）</li>
<li><strong>display.hOffset&#x2F;vOffset</strong>：水平和垂直偏移量</li>
<li><strong>mobile.show</strong>：是否在移动端显示</li>
<li><strong>mobile.scale</strong>：移动端缩放比例</li>
<li><strong>react.opacityDefault</strong>：默认透明度</li>
<li><strong>react.opacityOnHover</strong>：鼠标悬停时的透明度（0.2 表示鼠标移上去会变淡）</li>
</ul>
<h3 id="可选模型"><a href="#可选模型" class="headerlink" title="可选模型"></a>可选模型</h3><p>除了 Shizuku，还可以选择其他模型：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Koharu（小春）</span></span><br><span class="line"><span class="string">&quot;https://cdn.jsdelivr.net/npm/live2d-widget-model-koharu@1.0.5/assets/koharu.model.json&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Hibiki（响）</span></span><br><span class="line"><span class="string">&quot;https://cdn.jsdelivr.net/npm/live2d-widget-model-hibiki@1.0.5/assets/hibiki.model.json&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Miku（初音未来）</span></span><br><span class="line"><span class="string">&quot;https://cdn.jsdelivr.net/npm/live2d-widget-model-miku@1.0.5/assets/miku.model.json&quot;</span></span><br></pre></td></tr></table></figure>

<p>只需要替换 <code>jsonPath</code> 的值即可切换角色。</p>
]]></content>
      <categories>
        <category>博客搭建</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
        <tag>Butterfly</tag>
        <tag>博客</tag>
      </tags>
  </entry>
</search>
